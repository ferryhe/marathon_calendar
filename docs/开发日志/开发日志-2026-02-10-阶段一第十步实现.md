# 开发日志 - 2026-02-10 - 阶段一第十步实现（官网清单导入 + 前端快捷入口）

## 目标
1. 使用 `docs/marathon list.txt` 中你整理的“赛事官网清单”，批量更新/补充 `marathons.websiteUrl`。
2. 自动把导入的官网链接绑定到数据源 “赛事官方网站（直采）”，方便后续定时抓取与同步。
3. 前端列表增加“打开官网”的快捷入口，用户不进详情页也能直接访问。

## 主要改动
### 1) 官网清单导入脚本
- 新增：`script/import-marathon-list.ts`
  - 输入：默认读取 `docs/marathon list.txt`（Markdown 表格）
  - 处理：
    - upsert `marathons`（按 `canonicalName`）
    - 补齐 2026 占位 edition（`raceDate` 为空，方便前端稳定展示）
    - 绑定到 `marathon_sources`（source = “赛事官方网站（直采）”）
- 新增命令：`npm run marathons:import-list`

### 2) 前端列表快捷入口
- 更新：`client/src/components/MarathonTable.tsx`
  - 若赛事有 `websiteUrl`，在列表行右侧展示 ExternalLink 图标
  - 点击图标会在新标签打开官网（不触发行点击弹窗）

### 3) 文档
- 收录数据文件：`docs/marathon list.txt`
- 更新使用说明：`docs/使用说明-数据采集与管理后台.md` 增加导入命令说明

## 验收与验证
### 自动化检查（已通过）
- `npm run check`
- `npm run build`

### 需要你手工执行的导入步骤
```powershell
npm run db:ensure
npm run marathons:import-list
```

导入完成后：
- 打开首页列表，能看到更多赛事，并且带官网的赛事会出现“打开官网”小图标
- 进入 `/admin/data` 可看到新增的 Marathon Sources 绑定（sourceUrl = 官网链接）

