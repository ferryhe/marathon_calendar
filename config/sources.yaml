version: 1

# YAML as a version-controlled "source of truth" for Stage 1.3 crawl config.
# Import into Postgres via:
#   npm run config:import
#
# Notes:
# - `sources[].config` is stored as JSONB in `sources.config`.
# - `marathonSources[]` links a marathon (by canonicalName) to a specific `sourceUrl`.
# - This file is safe to commit: DO NOT put tokens or secrets here.

sources:
  - name: 赛事官方网站（直采）
    type: official
    strategy: HTML
    baseUrl: null
    priority: 100
    isActive: true
    retryMax: 3
    retryBackoffSeconds: 30
    requestTimeoutMs: 15000
    minIntervalSeconds: 86400
    notes: "Generic official-site connector. Prefer JSON-LD Event; allow per-site CSS rules."
    config:
      extract:
        # Optional: per-site overrides can be added here in DB (Admin UI) or in YAML.
        # Example:
        # raceDate:
        #   selector: 'meta[property="event:start_date"]'
        #   attr: "content"
        # registrationStatus:
        #   selector: ".registration-status"
        #   attr: "text"
        # registrationUrl:
        #   selector: "a[href*='register']"
        #   attr: "href"

  - name: 平台聚合（待接入）
    type: platform
    strategy: HTML
    baseUrl: null
    priority: 10
    isActive: false
    retryMax: 3
    retryBackoffSeconds: 30
    requestTimeoutMs: 15000
    minIntervalSeconds: 21600
    notes: "Placeholder for Zuicool/爱燃烧 etc. Discovery + binding is semi-manual."
    config: {}

# Optional: bind specific marathon official pages for crawling.
# The marathon must already exist in DB (seeded) with matching canonicalName.
marathonSources:
  # - marathonCanonicalName: Tokyo Marathon
  #   sourceName: 赛事官方网站（直采）
  #   sourceUrl: https://www.marathon.tokyo/en/
  #   isPrimary: true

